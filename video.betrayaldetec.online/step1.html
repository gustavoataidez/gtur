<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Step1 - Affair Detect</title>

  <!-- CSS do intlTelInput (vers√£o 17.x) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.12/css/intlTelInput.css"
  />
  <link rel="icon" href="assets/favicon-64x64.ico" type="image/x-icon">
  <script
  src="https://cdn.utmify.com.br/scripts/utms/latest.js"
  async
  defer
  data-utmify-ignore-iframe
></script>
<script>
  window.pixelId = "678e6e3c27d26b0948bcc31a";
  var a = document.createElement("script");
  a.setAttribute("async", "");
  a.setAttribute("defer", "");
  a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
  document.head.appendChild(a);
</script>

  <style>
    /* Reset b√°sico */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* Layout principal */
    body {
      background: url('https://www.argali.com.br/wp-content/uploads/2017/07/Fundo-WhatsApp.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-position: center;
      color: #000;              /* Textos em preto */
      font-family: Arial, sans-serif;
      text-align: center;       /* Centraliza o texto */
      margin: 0;                /* Remove margens padr√£o */
      padding: 20px;            /* Espa√ßo interno */
    }
    .width{
      margin: 0 auto;
    }

    /* Logo centralizada */
    .logo {
      display: block;
      margin: 0 auto 20px; /* 20px de espa√ßo abaixo */
      width: 60%;
      border-radius: 10px;
      max-width: 260px;
    }

    h1, h2 {
      margin: 20px 0 10px;
      font-size: 2.4em;
    }
    p {
      margin-bottom: 20px;
      font-size: 2em;
    }

    /* Input com bandeira */
    .iti {
      width: 600px !important;
      margin: 0 auto; 
    }
    .iti__country-list {
      z-index: 99999;
      font-size: 40px;
    }
    .red{
      color: red;
    }

    #phone {
      width: 600px;
      padding: 10px 10px 10px 60px; /* espa√ßo p/ bandeira */
      border-radius: 5px;
      font-size: 50px;
      border: 1px solid #3a3a3a;
    }

    /* Bot√£o */
    .botao-titulo{
      padding: 10px;
      background-color: #00A515; /* Cor do bot√£o */
      color: #fff;
      border: none;
      border-radius: 8px;
    }
    .botao {
      padding: 12px 20px;
      font-size: 2.6em;
      cursor: pointer;
      background-color: #00A515; /* Cor do bot√£o */
      margin-top: 30px;
      color: #fff;
      border: none;
      border-radius: 10px;
      animation: pulsar 1.5s infinite; /* Adiciona a anima√ß√£o */
    }

    /* Definindo a anima√ß√£o "pulsar" no bot√£o */
    @keyframes pulsar {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1);
      }
    }

    button:hover {
      opacity: 0.9;
    }

    
     @media (max-width: 500px) {
      body {
        background: url('./assets/back-wpp.png');
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: center;
      }
    } 

    
    .error-message {
      display: none;   
      color: #ff0000;  
      font-weight: bold;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
<div class="width">
  <!-- LOGO -->
  <img
    src="./assets/logo-wpp.webp" 
    alt="Logo"
    class="logo"
  />

  <h1>√ätes-vous fatigu√©(e) de soup√ßons constants ? Obtenez les r√©ponses dont vous avez besoin d√®s maintenant.</h1>

  <h2 class="botao-titulo">Premi√®re √©tape</h2>
  <p>Entrez le num√©ro de la personne que vous souhaitez surveiller et suivre.</p>
  
  <h2 class="botao-titulo">Deuxi√®me √©tape</h2>
  <p>Patientez pendant que le syst√®me analyse secr√®tement les messages et tous les fichiers multim√©dias.</p>
  
  <h2 class="botao-titulo">Troisi√®me √©tape</h2>
  <p>Visualisez tous les messages surveill√©s et les fichiers suspects d√©tect√©s par notre logiciel espion.</p>
  
  <h2 class="red">ENTREZ LE NUM√âRO DE VOTRE PARTENAIRE CI-DESSOUS üëá</h2>
  <p>Il n‚Äôest pas n√©cessaire de saisir l‚Äôindicatif du pays, uniquement le num√©ro.</p>
  
  <!-- Message d‚Äôerreur (reste masqu√© jusqu‚Äô√† ce qu‚Äôune erreur se produise) -->
  <div id="errorMsg" class="error-message"></div>






    <div class="width">
      <!-- Seu HTML existente... -->
    
      <!-- FORMULAIRE avec intlTelInput -->
      <form id="monitorForm">
        <label for="phone" style="display:none;">Num√©ro de t√©l√©phone¬†:</label>
        <input
          id="phone"
          type="tel"
          placeholder=""
          required
          onkeydown="return /[0-9() +\-BackspaceArrowLeftArrowRightDelete]/i.test(event.key)"
        >
        <br>
        <button class="botao" type="submit">‚úÖ CLIQUEZ ICI POUR SURVEILLER <br> LES NUM√âROS</button>
      </form>
    
      <!-- Mensagem de erro -->
      <div id="errorMsg" class="error-message"></div>
    
      <!-- Scripts necess√°rios -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.12/js/intlTelInput.min.js"></script>
      <script src="https://unpkg.com/imask"></script>
    
      <script>
      document.addEventListener("DOMContentLoaded", function() {
        const inputPhone = document.querySelector("#phone");
        const errorMsg   = document.querySelector("#errorMsg");
    
        // Inicializa o intlTelInput
        const iti = window.intlTelInput(inputPhone, {
          initialCountry: "auto",
          geoIpLookup: function(callback) {
            fetch('https://ipinfo.io?token=bba8adeeb38066')
              .then(response => response.json())
              .then(data => callback(data.country))
              .catch(() => callback("us"));
          },
          utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.12/js/utils.js",
          nationalMode: true,
          autoPlaceholder: "aggressive"
        });
    
        let phoneMask = null;
    
        // Fun√ß√£o para atualizar a m√°scara com base no pa√≠s selecionado
        function updateMask() {
          const countryData = iti.getSelectedCountryData();
    
          // Remove a m√°scara atual, se existir
          if(phoneMask) {
            phoneMask.destroy();
            phoneMask = null;
          }
    
          // Aplica m√°scaras conforme o pa√≠s selecionado
          if(countryData.iso2 === 'br') {
            phoneMask = IMask(inputPhone, {
              mask: '(00) 00000-0000'
            });
          } else if(countryData.iso2 === 'fr' || countryData.iso2 === 'ma' || countryData.iso2 === 'dz') {
            // Aplica formata√ß√£o semelhante para Fran√ßa, Marrocos e Arg√©lia
            phoneMask = IMask(inputPhone, {
              mask: '00 00 00 00 00'
            });
          }
          // Para outros pa√≠ses, nenhuma m√°scara √© aplicada
        }
    
        // Aplica a m√°scara inicialmente e a atualiza na mudan√ßa de pa√≠s
        updateMask();
        inputPhone.addEventListener("countrychange", updateMask);
    
        const minDigits = 9;
        const maxDigits = 15;
    
        const form = document.getElementById("monitorForm");
        form.addEventListener("submit", function(e) {
          e.preventDefault();
    
          errorMsg.style.display = "none";
          errorMsg.textContent = "";
    
          let e164Number = iti.getNumber();
          let onlyDigits = e164Number.replace(/\D/g, "");
    
          if (onlyDigits.length < minDigits || onlyDigits.length > maxDigits) {
            errorMsg.style.display = "block";
            errorMsg.textContent = `Please enter a valid number.`;
            return;
          }
    
          if (!iti.isValidNumber()) {
            errorMsg.style.display = "block";
            errorMsg.textContent = "The phone number doesn't seem valid for the selected country.";
            return;
          }
    
          window.location.href = "step2.html?tel=" + encodeURIComponent(onlyDigits);
        });
      });
      </script>
    </div>
    </body>    
</html>
